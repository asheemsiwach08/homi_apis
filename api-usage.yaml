api_usage:
  base_url: "http://localhost:5000/api_v1"
  
  endpoints:
    health:
      method: "GET"
      path: "/health"
      description: "Check API health"
      response: "200 OK with service status"
    
    send_otp:
      method: "POST"
      path: "/send-otp"
      description: "Send OTP via WhatsApp"
      payload:
        phone_number: "string (various formats supported)"
      response:
        success: "200 OK"
        data:
          success: true
          message: "OTP sent successfully"
          phone_number: "+917888888888"
          expires_in: 180
          timestamp: "2024-12-19T10:30:00Z"
        error: "400 Bad Request for invalid phone number"
    
    verify_otp:
      method: "POST"
      path: "/verify-otp"
      description: "Verify OTP code"
      payload:
        phone_number: "string"
        otp: "string (6 digits)"
      response:
        success: "200 OK"
        data:
          success: true
          message: "OTP verified successfully"
          phone_number: "+917888888888"
          verified_at: "2024-12-19T10:32:00Z"
        error: "400 Bad Request for invalid/expired OTP"
    
    resend_otp:
      method: "POST"
      path: "/resend-otp"
      description: "Resend OTP to phone number"
      payload:
        phone_number: "string"
      response:
        success: "200 OK"
        data:
          success: true
          message: "OTP resent successfully"
          phone_number: "+917888888888"
          expires_in: 180
          timestamp: "2024-12-19T10:35:00Z"
        error: "400 Bad Request if no existing OTP"
    
    create_lead:
      method: "POST"
      path: "/create-lead"
      description: "Create new lead with Basic Application API"
      payload:
        first_name: "string"
        last_name: "string"
        mobile_number: "string"
        email: "string"
        pan_number: "string (ABCDE1234F format)"
        loan_type: "string (personal, home, business, vehicle, education)"
        loan_amount: "number (10000-10000000)"
        loan_tenure: "integer (12-84 months)"
        gender: "string (male, female, other)"
        dob: "string (DD/MM/YYYY format)"
        pin_code: "string (6 digits)"
      response:
        success: "200 OK"
        data:
          success: true
          message: "Lead created successfully"
          basic_application_id: "BA123456789"
          customer_id: "CUST987654321"
          lead_id: "LID123456"
          whatsapp_sent: true
          created_at: "2024-12-19T10:30:00Z"
        error: "400 Bad Request for invalid data"
    
    lead_status_by_id:
      method: "GET"
      path: "/lead-status/{basic_application_id}"
      description: "Get lead status by application ID"
      parameters:
        basic_application_id: "string (path parameter)"
      response:
        success: "200 OK"
        data:
          success: true
          basic_application_id: "BA123456789"
          customer_id: "CUST987654321"
          status: "approved"
          first_name: "John"
          last_name: "Doe"
          mobile_number: "+917888888888"
          email: "john.doe@example.com"
          loan_type: "personal"
          loan_amount: 500000
          loan_tenure: 36
          created_at: "2024-12-19T10:30:00Z"
          updated_at: "2024-12-19T11:00:00Z"
        error: "404 Not Found if lead doesn't exist"
    
    lead_status_by_mobile:
      method: "GET"
      path: "/lead-status/mobile/{mobile_number}"
      description: "Get lead status by mobile number"
      parameters:
        mobile_number: "string (path parameter)"
      response:
        success: "200 OK"
        data:
          success: true
          basic_application_id: "BA123456789"
          customer_id: "CUST987654321"
          status: "pending"
          first_name: "John"
          last_name: "Doe"
          mobile_number: "+917888888888"
          email: "john.doe@example.com"
          loan_type: "personal"
          loan_amount: 500000
          loan_tenure: 36
          created_at: "2024-12-19T10:30:00Z"
          updated_at: "2024-12-19T10:30:00Z"
        error: "404 Not Found if lead doesn't exist"
    
    whatsapp_process_message:
      method: "POST"
      path: "/whatsapp/process_message"
      description: "Process WhatsApp message and check application status"
      payload:
        message: "string (WhatsApp message content)"
        phone_number: "string (sender's phone number)"
      response:
        success: "200 OK"
        data:
          success: true
          message: "Your application status is: approved"
          status: "approved"
          application_id: "APP123456"
        error: "400 Bad Request for invalid message or phone number"
  
  phone_number_formats:
    supported:
      - "917888888888 (with country code)"
      - "788888888 (without country code)"
      - "+917888888888 (with + prefix)"
      - "0788888888 (with leading 0)"
      - "888888888 (9 digits)"
      - "88888888 (8 digits)"
    validation: "^\\+91[1-9]\\d{9,11}$"
    normalization: "Auto-adds +91 prefix"
  
  examples:
    send_otp:
      curl: |
        curl -X POST "http://localhost:5000/api_v1/send-otp" \
          -H "Content-Type: application/json" \
          -d '{"phone_number": "917888888888"}'
      payload: '{"phone_number": "917888888888"}'
    
    verify_otp:
      curl: |
        curl -X POST "http://localhost:5000/api_v1/verify-otp" \
          -H "Content-Type: application/json" \
          -d '{"phone_number": "917888888888", "otp": "123456"}'
      payload: '{"phone_number": "917888888888", "otp": "123456"}'
    
    create_lead:
      curl: |
        curl -X POST "http://localhost:5000/api_v1/create-lead" \
          -H "Content-Type: application/json" \
          -d '{
            "first_name": "John",
            "last_name": "Doe",
            "mobile_number": "917888888888",
            "email": "john.doe@example.com",
            "pan_number": "ABCDE1234F",
            "loan_type": "personal",
            "loan_amount": 500000,
            "loan_tenure": 36,
            "gender": "male",
            "dob": "15/03/1990",
            "pin_code": "400001"
          }'
      payload: |
        {
          "first_name": "John",
          "last_name": "Doe",
          "mobile_number": "917888888888",
          "email": "john.doe@example.com",
          "pan_number": "ABCDE1234F",
          "loan_type": "personal",
          "loan_amount": 500000,
          "loan_tenure": 36,
          "gender": "male",
          "dob": "15/03/1990",
          "pin_code": "400001"
        }
    
    get_lead_status:
      curl: |
        curl -X GET "http://localhost:5000/api_v1/lead-status/BA123456789"
      url: "http://localhost:5000/api_v1/lead-status/BA123456789"
    
    whatsapp_process_message:
      curl: |
        curl -X POST "http://localhost:5000/api_v1/whatsapp/process_message" \
          -H "Content-Type: application/json" \
          -d '{
            "message": "I want to check my application status. My mobile number is 9876543210",
            "phone_number": "+919876543210"
          }'
      payload: |
        {
          "message": "I want to check my application status. My mobile number is 9876543210",
          "phone_number": "+919876543210"
        }
  
  error_responses:
    format:
      error: "string (error message)"
      detail: "string (detailed description)"
      status_code: "integer (HTTP status code)"
    
    common_errors:
      - status: 400
        error: "Invalid phone number format"
        detail: "Phone number must be a valid Indian mobile number"
      - status: 400
        error: "Invalid OTP"
        detail: "The OTP code provided is incorrect"
      - status: 400
        error: "OTP expired"
        detail: "The OTP has expired. Please request a new one."
      - status: 404
        error: "Lead not found"
        detail: "No lead found with the specified criteria"
      - status: 500
        error: "Internal server error"
        detail: "An unexpected error occurred"
  
  status_codes:
    success:
      - 200: "OK - Request successful"
    client_errors:
      - 400: "Bad Request - Invalid input data"
      - 404: "Not Found - Resource not found"
      - 409: "Conflict - Resource already exists"
      - 429: "Too Many Requests - Rate limit exceeded"
    server_errors:
      - 500: "Internal Server Error - Server error" 